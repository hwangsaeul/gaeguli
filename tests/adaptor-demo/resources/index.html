<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="style.css">
  </head>
  <body onload="document.getElementById('demo_form').reset();">
    <header>
    </header>
    <form id="demo_form">
      <input type="checkbox" id="stream_toggle"/>
      <label for="toggle_stream">Stream</label>
      <input type="checkbox" id="adaptive-streaming"/>
      <label for="adaptive-streaming">Adaptive streaming</label>
      <table>
        <tr>
          <td><b>SRT URI:</b></td>
          <td><input type="text" id="srt-uri" disabled/></td>
        </tr>
        <tr>
          <td><b>Bitrate:</b></td>
          <td><input type="text" id="bitrate-text" disabled/> kbps</td>
          <td>
            <input type="range" id="bitrate-range" min="1" max="20000"/>
            <input type="hidden" id="bitrate"/>
          </td>
          <td><button type="button" id="bitrate-submit">Submit</button></td>
        </tr>
        <tr>
          <td><b>Actual bitrate:</b></td>
          <td>
            <input type="text" id="bitrate-actual-text" disabled/> kbps
            <input type="hidden" id="bitrate-actual"/>
          </td>
        </tr>
        <tr>
          <td><b>Quantizer:</b></td>
          <td><input type="text" id="quantizer-text" disabled/></td>
          <td><input type="range" id="quantizer" min="0" max="50"/></td>
          <td><button type="button" id="quantizer-submit">Submit</button></td>
        </tr>
        <tr>
          <td><b>Actual quantizer:</b></td>
          <td><input type="text" id="quantizer-actual" disabled></td>
        </tr>
        <tr>
          <td><b>SRT packets sent:</b></td>
          <td><input type="text" id="srt-packets-sent" disabled/></td>
        </tr>
        <tr>
          <td><b>SRT lost packets:</b></td>
          <td><input type="text" id="srt-packets-sent-lost" disabled/></td>
        </tr>
        <tr>
          <td><b>SRT send rate:</b></td>
          <td>
            <input type="text" id="srt-send-rate-text" disabled/> kbps
            <input type="hidden" id="srt-send-rate"/>
          </td>
        </tr>
        <tr>
          <td><b>SRT measured bandwidth:</b></td>
          <td>
            <input type="text" id="srt-bandwidth-text" disabled/> kbps
            <input type="hidden" id="srt-bandwidth"/>
          </td>
        </tr>
      </table>
    </form>
    <footer>
    </footer>

    <script type="module">
      "use strict";

      import * as gaeguli from './adaptor-demo.js'

      var demo = new gaeguli.AdaptorDemo(document.getElementById("demo_form"))

      document.getElementById("adaptive-streaming").onchange = (event) => {
        demo.property("adaptive-streaming", document.getElementById("adaptive-streaming").checked)
      }
      document.getElementById("bitrate").onchange = (event) => {
        document.getElementById("bitrate-range").value = event.target.value / 1000
        document.getElementById("bitrate-text").value = event.target.value / 1000
      }
      document.getElementById("bitrate-range").onchange = (event) => {
        document.getElementById("bitrate-text").value = event.target.value
      }
      document.getElementById("bitrate-submit").onclick = () => {
        demo.property("bitrate", document.getElementById("bitrate-range").value * 1000)
      }
      document.getElementById("bitrate-actual").onchange = (event) => {
        document.getElementById("bitrate-actual-text").value = event.target.value / 1000
      }
      document.getElementById("quantizer").onchange = (event) => {
        document.getElementById("quantizer-text").value = event.target.value
      }
      document.getElementById("quantizer-submit").onclick = () => {
        demo.property("quantizer", parseInt(document.getElementById("quantizer").value))
      }
      document.getElementById("srt-send-rate").onchange = (event) => {
        document.getElementById("srt-send-rate-text").value = event.target.value / 1000
      }
      document.getElementById("srt-bandwidth").onchange = (event) => {
        document.getElementById("srt-bandwidth-text").value = event.target.value / 1000
      }
    </script>
  </body>
</html>
